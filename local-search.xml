<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Hexo搭建博客</title>
    <link href="/2022/10/06/Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
    <url>/2022/10/06/Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<h2 id="Hexo搭建博客"><a href="#Hexo搭建博客" class="headerlink" title="Hexo搭建博客"></a>Hexo搭建博客</h2><h2 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h2><blockquote><p><a href="https://hexo.io/zh-cn/docs/">https://hexo.io/zh-cn/docs/</a></p></blockquote><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ol><li><p>安装基础环境</p><blockquote><p>Node.js和git</p></blockquote></li><li><p>安装Hexo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -g hexo-cli<br></code></pre></td></tr></table></figure></li><li><p>建站</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo init blog<br></code></pre></td></tr></table></figure><p>目录结构如下</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6ue0d3bbnj30vg0c0jti.jpg" alt="image-20221005141812611"></p></li><li><p>初始化博客内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 进入目录</span><br><span class="hljs-built_in">cd</span> blog<br><span class="hljs-comment"># </span><br>npm install<br></code></pre></td></tr></table></figure></li><li><p>开启服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 开启 Hexo 服务</span><br>hexo g<br>hexo server<span class="hljs-comment"># 也可以使用缩写版本：hexo s</span><br><br><span class="hljs-comment"># 后台启动</span><br><span class="hljs-built_in">nohup</span> hexo server &amp;<br></code></pre></td></tr></table></figure></li><li><p>访问<a href="http://localhost:4000/">http://localhost:4000/</a></p></li><li><p>生成静态文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo generate<br></code></pre></td></tr></table></figure></li></ol><h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><h4 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h4><blockquote><ol><li><p>克隆NexT主题到themes文件夹</p><p>git clone <a href="https://github.com/iissnan/hexo-theme-next">https://github.com/iissnan/hexo-theme-next</a></p></li><li><p>下载Fluid主题解压到themes文件夹</p><blockquote><p>主题官网文档：<a href="https://hexo.fluid-dev.com/docs/">https://hexo.fluid-dev.com/docs/</a></p></blockquote><p><a href="https://github.com/fluid-dev/hexo-theme-fluid">https://github.com/fluid-dev/hexo-theme-fluid</a></p><p>PS. 使用fluid主题时，下载下来的文件夹名字是这样的<code>hexo-theme-fluid-1.9.3</code>，需要将其修改为<code>fluid</code>；</p></li></ol></blockquote><h4 id="配置主题"><a href="#配置主题" class="headerlink" title="配置主题"></a>配置主题</h4><blockquote><p>修改<code>_config.yml</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># theme: next  # 指定主题</span><br>theme: fluid  <span class="hljs-comment"># 指定主题</span><br>language: zh-CN  <span class="hljs-comment"># 指定语言，会影响主题显示的语言，按需修改</span><br></code></pre></td></tr></table></figure><h3 id="创建「关于页」"><a href="#创建「关于页」" class="headerlink" title="创建「关于页」"></a>创建「关于页」</h3><blockquote><p>首次使用主题的「关于页」需要手动创建：</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo new page about<br></code></pre></td></tr></table></figure><p>创建成功后，编辑博客目录下 <code>/source/about/index.md</code>，添加 <code>layout</code> 属性。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> <span class="hljs-string">about</span><br><span class="hljs-attr">date:</span> <span class="hljs-number">2020-02-23 19:20:33</span><br><span class="hljs-attr">layout:</span> <span class="hljs-string">about</span><br><span class="hljs-meta">---</span><br><span class="hljs-meta"></span><br><span class="hljs-string">这里写关于页的正文，支持</span> <span class="hljs-string">Markdown,</span> <span class="hljs-string">HTML</span><br></code></pre></td></tr></table></figure><h3 id="创建文章"><a href="#创建文章" class="headerlink" title="创建文章"></a>创建文章</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo new post 测试文章<br></code></pre></td></tr></table></figure><h3 id="站点设置"><a href="#站点设置" class="headerlink" title="站点设置"></a>站点设置</h3><p>修改<code>_config.yml</code>即可</p><h3 id="阅读量统计"><a href="#阅读量统计" class="headerlink" title="阅读量统计"></a>阅读量统计</h3><blockquote><p>账号注册：<a href="https://console.leancloud.cn/register">https://console.leancloud.cn/register</a></p><p>需身份验证和邮箱验证</p></blockquote><p><strong>创建应用</strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6ul097k1hj310c0u0jtn.jpg" alt="image-20221005182005192"></p><p><strong>获取应用appid</strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6ul5uerwmj31fj0u0tcs.jpg" alt="image-20221005182543636"></p><p>打开主题目录 <code>themes\fluid</code>下的 <code>_config.yml</code> 文件，修改如下配置</p><ol><li>开启统计</li></ol><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6ulacrda9j316u0jejup.jpg" alt="image-20221005183006359"></p><ol start="2"><li>配置 <code>leancloud</code>的 <code>app_id</code> 、 <code>app_key</code>和<code>REST API 服务器地址</code></li></ol><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6ulbksgsfj31qi0e6tb8.jpg" alt="image-20221005183114159"></p><ol start="3"><li>打开计数功能，统计来源改为 <code>leancloud</code></li></ol><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6ullnp2s0j316009umxn.jpg" alt="image-20221005184055476"></p><ol start="4"><li><h5 id="页面底部展示网站的-PV、UV-统计数"><a href="#页面底部展示网站的-PV、UV-统计数" class="headerlink" title="页面底部展示网站的 PV、UV 统计数"></a>页面底部展示网站的 PV、UV 统计数</h5></li></ol><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6uluh1shzj326y0mmjvd.jpg" alt="image-20221005184926645"></p><h3 id="开启评论功能"><a href="#开启评论功能" class="headerlink" title="开启评论功能"></a>开启评论功能</h3><p>打开主题目录 <code>themes\fluid</code>下的 <code>_config.yml</code> 文件，修改如下配置</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6um4h4mvnj31k208sgmi.jpg" alt="image-20221005185903196"></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6ulyco78nj31e80jognp.jpg" alt="image-20221005185309930"></p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>站点设置：根目录<code>_config.yml</code></p><p>主题设置：根目录<code>_config.fluid.yml</code></p><h2 id="在Github上托管"><a href="#在Github上托管" class="headerlink" title="在Github上托管"></a>在Github上托管</h2><h3 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6umofe7r5j31030qcq5y.jpg" alt="image-20221005191814021"></p><h3 id="创建token"><a href="#创建token" class="headerlink" title="创建token"></a>创建token</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6um9ofdiwj316d0hwgnj.jpg" alt="image-20221005190403282"></p><h3 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6umb5r6m0j318e07ewfc.jpg" alt="image-20221005190528703"></p><h3 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo g -d<br></code></pre></td></tr></table></figure><h3 id="创建Readme文件"><a href="#创建Readme文件" class="headerlink" title="创建Readme文件"></a>创建Readme文件</h3><p>&#x3D;&#x3D;<strong>发布后记得添加Readme.md文件，否则网站无法访问</strong>&#x3D;&#x3D;</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6umqfxdz7j31fq0oxdkf.jpg" alt="image-20221005192010048"></p><h3 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h3><p><a href="https://unclebryan719.github.io/">https://unclebryan719.github.io/</a></p>]]></content>
    
    
    <categories>
      
      <category>tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tech</tag>
      
      <tag>hexo</tag>
      
      <tag>blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>群晖使用</title>
    <link href="/2022/09/25/%E7%BE%A4%E6%99%96%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/09/25/%E7%BE%A4%E6%99%96%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ol><li>浏览器输入：<a href="http://192.168.1.15:5000/web_index.html">http://192.168.1.15:5000/web_index.html</a></li></ol><p>![image-20220929220133453](..&#x2F;..&#x2F;..&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20220929220133453.png)</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6ntpa5cnpj21d30u00un.jpg" alt="image-20220929220207185"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6ntpnz9qnj211c0u0ab4.jpg" alt="image-20220929220237445"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6nttvxfy8j21hd0u0myc.jpg" alt="image-20220929220642771"></p><p>![image-20220929220720031](..&#x2F;..&#x2F;..&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20220929220720031.png)</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6ntv23d84j21fp0u0myn.jpg" alt="image-20220929220748440"></p><ol start="2"><li><p>基础设置</p><p>![image-20220929220902748](..&#x2F;..&#x2F;..&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20220929220902748.png)</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6ntxvg64lj21i50u0q4p.jpg" alt="image-20220929221015542"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6ntybvlclj21hf0u077w.jpg" alt="image-20220929221053072"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6nu09mf5sj21fd0u0ada.jpg" alt="image-20220929221233555"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6nu1mpbnkj21h30u041e.jpg" alt="image-20220929221408325"></p></li><li><p>设置磁盘格式</p><blockquote><p>SHR会做备份，比如有两块4T硬盘，使用该格式，整体可用空间为4T</p><p>Basic是硬盘实际总和，不会做备份</p></blockquote><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6nu4g5hi5j31jk0u0tau.jpg" alt="image-20220929221649354"></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6nu5j05e0j313n0u0q4u.jpg" alt="image-20220929221751265"></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6nu69aq22j31hx0u0gnc.jpg" alt="image-20220929221833125"></p></li></ol><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6nukghnbfj323m0u0q5j.jpg" alt="image-20220929223215068"></p><h3 id="安装套件"><a href="#安装套件" class="headerlink" title="安装套件"></a>安装套件</h3><h3 id="系统设置"><a href="#系统设置" class="headerlink" title="系统设置"></a>系统设置</h3><p>开启AFP服务，用于mac连接</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6nuw563xyj31hr0u0ju1.jpg" alt="image-20220929224328737"></p><p>开启SSH</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6nv61s9jij31i30u0q5a.jpg" alt="image-20220929225258920"></p><h2 id="群晖使用"><a href="#群晖使用" class="headerlink" title="群晖使用"></a>群晖使用</h2><h3 id="客户端连接群晖"><a href="#客户端连接群晖" class="headerlink" title="客户端连接群晖"></a>客户端连接群晖</h3><p>DSM 支持最常用的协议，可从 Windows、Mac 和 Linux 设备提供无缝文件访问：</p><p>• 对于 Windows：SMB&#x2F;CIFS</p><p>• 对于 Mac：AFP、SMB</p><p>• 对于 Linux：NFS、SMB</p><p>&#x3D;&#x3D;SMB 支持所有三种类型的操作系统，但可能比 NFS 和 AFP 更慢。&#x3D;&#x3D;</p><h3 id="监控存储"><a href="#监控存储" class="headerlink" title="监控存储"></a>监控存储</h3><p>Surveillance Station都可以来监控存储</p><h3 id="Transmission安装"><a href="#Transmission安装" class="headerlink" title="Transmission安装"></a>Transmission安装</h3><p>玩物下载——Nas版迅雷</p><p>docker安装v2ray</p><p>音乐插件</p><p>网易云音乐歌词插件</p><h3 id="官方套件"><a href="#官方套件" class="headerlink" title="官方套件"></a>官方套件</h3><ol><li>Audio Station</li><li>Note Station</li><li>Video Station</li><li>File Station</li><li>Synology Photos</li><li>WebDav Server</li><li>Surveillance Station 家里监控视频备份</li><li>Synology Office</li><li>Synology Drive Server</li><li>媒体服务器</li><li>Universal Search 搜索软件</li><li>Hyper Backup  将nas系统中的重要文件备份到多个地方</li><li>Cloud Sync</li><li>Docker</li><li>Synology Contacts</li></ol><h3 id="三方套件来源"><a href="#三方套件来源" class="headerlink" title="三方套件来源"></a>三方套件来源</h3><ol><li><a href="http://packages.synocommunity.com/">http://packages.synocommunity.com/</a>  </li><li>spk7 <a href="https://spk7.imnks.com/">https://spk7.imnks.com/</a> <ol><li>下载ffmpeg快</li></ol></li></ol><h4 id="Docker安装Transmission"><a href="#Docker安装Transmission" class="headerlink" title="Docker安装Transmission"></a>Docker安装Transmission</h4><ol><li><p>打开docker</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6nzdi1wumj30qm0hodh3.jpg" alt="Install-Docker-Synology-DSM-7"></p></li><li><p>创建文件夹</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6nze0bvlyj30rz0fj759.jpg" alt="Transmission-Synology-NAS-Set-up-1"></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6nze91wbij30rz0fl0u2.jpg" alt="Transmission-Synology-NAS-Set-up-2"></p></li><li><p>ssh连接到nas并执行下面的命令</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -d --name=transmission \<br>-p 9091:9091 \<br>-p 51413:51413 \<br>-p 51413:51413/udp \<br>-e PUID=1026 \<br>-e PGID=100 \<br>-e TZ=EAsia/Shanghai \<br>-e USER=用户名 \<br>-e PASS=密码 \<br>-e TRANSMISSION_WEB_HOME=/combustion-release/ \<br>-v /volume1/docker/transmission/data:/config \<br>-v /volume1/docker/transmission/downloads:/downloads \<br>-v /volume1/docker/transmission/incomplete:/watch \<br>--restart always \<br>ghcr.io/linuxserver/transmission<br></code></pre></td></tr></table></figure><ol start="4"><li>打开网址：<a href="http://192.168.1.15:9091/">http://192.168.1.15:9091/</a></li></ol><p>PS. 时区的查看方式 <a href="https://timezone.mariushosting.com/">https://timezone.mariushosting.com/</a></p><h3 id="用户权限分配"><a href="#用户权限分配" class="headerlink" title="用户权限分配"></a>用户权限分配</h3><p>video<br>photo<br>music</p><h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><p>kodi + plex插件</p><h3 id="音乐格式转换"><a href="#音乐格式转换" class="headerlink" title="音乐格式转换"></a>音乐格式转换</h3><p>QQ音乐mflac转flac插件：<a href="https://github.com/unlock-music/unlock-music">https://github.com/unlock-music/unlock-music</a></p><h3 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h3><p>照片</p><p>手机号</p><p>文档</p><p>音乐</p><p>电影</p><p>图书</p><h3 id="群晖shell命令"><a href="#群晖shell命令" class="headerlink" title="群晖shell命令"></a>群晖shell命令</h3><p><a href="https://zhuanlan.zhihu.com/p/459751737">https://zhuanlan.zhihu.com/p/459751737</a></p><h2 id="frp内网穿透"><a href="#frp内网穿透" class="headerlink" title="frp内网穿透"></a>frp内网穿透</h2><blockquote><p>前置条件：需要一台云服务器</p><p>官方文档：<a href="https://gofrp.org/docs/">https://gofrp.org/docs/</a></p></blockquote><h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><ol><li><p>在云服务器上安装frp</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 下载</span><br>wget https://github.com/fatedier/frp/releases/download/v0.44.0/frp_0.44.0_linux_amd64.tar.gz<br><span class="hljs-comment"># 解压</span><br>tar -zxvf frp_0.44.0_linux_amd64.tar.gz<br></code></pre></td></tr></table></figure></li><li><p>进入目录修改<code>frps.ini</code>配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">[common]<br><span class="hljs-comment"># 服务端监听的端口</span><br>bind_port = 7000<br><span class="hljs-comment"># 服务端token</span><br>token = 19900527<br><br><span class="hljs-comment"># 可视化界面端口</span><br>dashboard_port = 7500<br>dashboard_user = unclebryan<br>dashboard_pwd = Bojon520.<br>enable_prometheus = <span class="hljs-literal">true</span><br><br>log_file = /var/log/frps.log<br>log_level = info<br>log_max_days = 3<br><br></code></pre></td></tr></table></figure></li></ol><h3 id="客户端-1"><a href="#客户端-1" class="headerlink" title="客户端"></a>客户端</h3><blockquote><p>&#x3D;&#x3D;PS. 最开始在nas上使用docker安装，并未成功！现象是客户端连接服务端，无限重启！&#x3D;&#x3D;</p></blockquote><ol><li><p>在nas或者其他设备上安装frp</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 下载</span><br>wget https://github.com/fatedier/frp/releases/download/v0.44.0/frp_0.44.0_linux_amd64.tar.gz<br><span class="hljs-comment"># 解压</span><br>tar -zxvf frp_0.44.0_linux_amd64.tar.gz<br></code></pre></td></tr></table></figure></li><li><p>进入目录修改<code>frpc.ini</code>配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs bash">[common]<br><span class="hljs-comment"># 服务端IP</span><br>server_addr = 185.239.68.162<br><span class="hljs-comment"># 服务端监听的端口</span><br>server_port = 7000<br><span class="hljs-comment"># 服务端token</span><br>token = 19900527<br>[ssh]<br><span class="hljs-comment"># 协议类型</span><br><span class="hljs-built_in">type</span> = tcp<br><span class="hljs-comment"># 本地IP</span><br>local_ip = 192.168.1.15<br><span class="hljs-comment"># 本地端口</span><br>local_port = 22<br><span class="hljs-comment"># 远程端口</span><br>remote_port = 2222<br>[dsm]<br><span class="hljs-built_in">type</span> = tcp<br>local_ip = 192.168.1.15<br>local_port = 5000<br>remote_port = 5443<br>[ds_file]<br><span class="hljs-built_in">type</span> = tcp<br>local_ip = 192.168.1.15<br>local_port = 5001<br>remote_port = 5001<br>[https_webdav]<br><span class="hljs-built_in">type</span> = tcp<br>local_ip = 192.168.1.15<br>local_port = 5006<br>remote_port = 5007<br>[http_webdav]<br><span class="hljs-built_in">type</span> = tcp<br>local_ip = 192.168.1.15<br>local_port = 5004<br>remote_port = 5005<br>[emby]<br><span class="hljs-built_in">type</span> = tcp<br>local_ip = 192.168.1.15<br>local_port = 8097<br>remote_port = 8096<br></code></pre></td></tr></table></figure></li></ol><h3 id="可视化界面"><a href="#可视化界面" class="headerlink" title="可视化界面"></a>可视化界面</h3><blockquote><p><a href="http://185.239.68.162:7500/">http://185.239.68.162:7500/</a></p></blockquote><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6p2c958flj22ej0u0div.jpg" alt="image-20220930234641198"></p><h3 id="配置域名映射"><a href="#配置域名映射" class="headerlink" title="配置域名映射"></a>配置域名映射</h3><ol><li>进入目录修改<code>frps.ini</code>配置</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 新增域名配置</span><br>subdomain_host = nas.unclebryan.cn<br></code></pre></td></tr></table></figure><ol start="2"><li>域名解析配置</li></ol><h3 id="迅雷内侧版"><a href="#迅雷内侧版" class="headerlink" title="迅雷内侧版"></a>迅雷内侧版</h3><p>邀请码：<a href="https://docs.qq.com/form/page/DQUJXZUdtRlNGWkxr?_w_tencentdocx_form=1#/fill">https://docs.qq.com/form/page/DQUJXZUdtRlNGWkxr?_w_tencentdocx_form=1#/fill</a></p><h3 id="video-station-TMDB连接测试失败"><a href="#video-station-TMDB连接测试失败" class="headerlink" title="video station TMDB连接测试失败"></a>video station TMDB连接测试失败</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 修改nas的host</span><br>vi /etc/hosts<br><br><span class="hljs-comment">#host内容如下</span><br>13.226.238.76 api.themoviedb.org<br>13.224.161.90 api.themoviedb.org<br>13.35.7.102 api.themoviedb.org<br>13.225.103.26 api.themoviedb.org<br>13.226.191.85 api.themoviedb.org<br>13.225.103.110 api.themoviedb.org<br>52.85.79.89 api.themoviedb.org<br>13.225.41.40 api.themoviedb.org<br>13.226.251.88 api.themoviedb.org<br>13.225.89.239 api.thetvdb.com<br>13.249.175.212 api.thetvdb.com<br>13.35.161.120 api.thetvdb.com<br></code></pre></td></tr></table></figure><h3 id="坑"><a href="#坑" class="headerlink" title="坑"></a>坑</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6q5cqn129j31rc0u041u.jpg" alt="image-20221001221621534"></p><blockquote><p>选择对应的系统并下载解码包</p></blockquote><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6q5i2uwl8j31hy0u0afa.jpg" alt="image-20221001222141017"></p><h3 id="Video-Station不支持音轨"><a href="#Video-Station不支持音轨" class="headerlink" title="Video Station不支持音轨"></a>Video Station不支持音轨</h3><ol><li><p>下载ff</p></li><li><p>执行如下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 切换到root权限，回车后输入管理员密码即可</span><br>sudo -i <br><br><span class="hljs-comment"># 保存 Video Station 使用的 ffmpeg</span><br><span class="hljs-built_in">mv</span> -n /var/packages/VideoStation/target/bin/ffmpeg /var/packages/VideoStation/target/bin/ffmpeg.orig<br><br><span class="hljs-comment"># 注入脚本</span><br>wget -O - https://gist.githubusercontent.com/BenjaminPoncet/bbef9edc1d0800528813e75c1669e57e/raw/ffmpeg-wrapper &gt; /var/packages/VideoStation/target/bin/ffmpeg<br><br><span class="hljs-comment"># 更改脚本的所有权和模式</span><br><span class="hljs-built_in">chown</span> root:VideoStation /var/packages/VideoStation/target/bin/ffmpeg<br><span class="hljs-built_in">chmod</span> 750 /var/packages/VideoStation/target/bin/ffmpeg<br><span class="hljs-built_in">chmod</span> u+s /var/packages/VideoStation/target/bin/ffmpeg<br><br><span class="hljs-comment"># 保存 Video Station 的 libsynovte.so</span><br><span class="hljs-built_in">cp</span> -n /var/packages/VideoStation/target/lib/libsynovte.so /var/packages/VideoStation/target/lib/libsynovte.so.orig<br><span class="hljs-built_in">chown</span> VideoStation:VideoStation /var/packages/VideoStation/target/lib/libsynovte.so.orig<br><br><span class="hljs-comment"># 使libsynovte.so 支持 DTS, EAC3, TrueHD</span><br>sed -i -e <span class="hljs-string">&#x27;s/eac3/3cae/&#x27;</span> -e <span class="hljs-string">&#x27;s/dts/std/&#x27;</span> -e <span class="hljs-string">&#x27;s/truehd/dheurt/&#x27;</span> /var/packages/VideoStation/target/lib/libsynovte.so<br><br><br><br><span class="hljs-comment"># 适用于DMS6</span><br><span class="hljs-built_in">mv</span> /var/packages/CodecPack/target/bin/ffmpeg33  /var/packages/CodecPack/target/bin/ffmpeg33.orig   <br><span class="hljs-built_in">cp</span> /var/packages/VideoStation/target/bin/ffmpeg /var/packages/CodecPack/target/bin/ffmpeg33<br><br><br><span class="hljs-comment"># 适用于DMS7.0</span><br><span class="hljs-built_in">mv</span> /var/packages/CodecPack/target/bin/ffmpeg41  /var/packages/CodecPack/target/bin/ffmpeg41.orig<br><span class="hljs-built_in">cp</span> /var/packages/VideoStation/target/bin/ffmpeg /var/packages/CodecPack/target/bin/ffmpeg41<br></code></pre></td></tr></table></figure></li><li><p>重启Video Station</p></li></ol><p>后续更新</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget -O - https://gist.githubusercontent.com/BenjaminPoncet/bbef9edc1d0800528813e75c1669e57e/raw/ffmpeg-wrapper &gt; /var/packages/VideoStation/target/bin/ffmpeg<br></code></pre></td></tr></table></figure><h3 id="Kodi使用"><a href="#Kodi使用" class="headerlink" title="Kodi使用"></a>Kodi使用</h3><ol><li><p>中文乱码</p><blockquote><p>先将字体修改为Arial based，然后再切换语言为中文</p></blockquote><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6skoy2o2pj31af0u0jte.jpg" alt="image-20221004003819369"></p></li></ol><p>​<img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6skrr0yvxj31af0u00vl.jpg" alt="image-20221004004101610"></p><h3 id="群晖Webdav"><a href="#群晖Webdav" class="headerlink" title="群晖Webdav"></a>群晖Webdav</h3><ol><li><p>在套件中心安装Webdav Server并开启Webdav服务</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1h6t1nd4wcyj31hd0u041k.jpg" alt="image-20221004102504079"></p></li><li></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>tech</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DDD领域驱动设计</title>
    <link href="/2022/06/06/DDD/DDD%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/"/>
    <url>/2022/06/06/DDD/DDD%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/</url>
    
    <content type="html"><![CDATA[<h2 id="DDD领域驱动设计"><a href="#DDD领域驱动设计" class="headerlink" title="DDD领域驱动设计"></a>DDD领域驱动设计</h2><h4 id="数据驱动设计流程"><a href="#数据驱动设计流程" class="headerlink" title="数据驱动设计流程"></a>数据驱动设计流程</h4><ol><li>需求分析</li><li>数据建模（ER图）</li><li>建库建表（写DAO)</li><li>编写业务逻辑</li></ol><p>弊端：很难重用、</p><h4 id="领域驱动设计流程"><a href="#领域驱动设计流程" class="headerlink" title="领域驱动设计流程"></a>领域驱动设计流程</h4><ol><li>需求分析，有规范，使用统一语言</li></ol><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2ylj1g43dj21cc0u00uo.jpg" alt="image-20220606161912443"></p><ol start="2"><li><p>领域分析——领域边界划分，边界的划分标准是业务</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2ylk691lsj21h50u00vt.jpg" alt="image-20220606162020157"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2ylohgyguj21dy0u040g.jpg" alt="image-20220606162435773"></p></li></ol><p>为了保证领域的内聚性更强，会对领域采取保护手段，包括ACL、OHS、PL</p><p>ACL：接口层面的定义，通过适配器、桥接模式等，</p><p>OHS、PL：应用层</p><p>领域建模</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2yojp64g0j21mi0u077h.jpg" alt="image-20220606180346934"></p><p>领域对象</p><ol><li>Bounded Context</li><li>Aggregate：聚合根，是一个大对象，包含多个Entities、多个Value Object共同组成</li><li>Value Object： 无状态的值对象</li><li>Entities：有唯一标识且有状态的对象</li><li>Services：在Entities无法满足的情况下使用，只操作无状态的数据</li><li>DomainEvents: 领域事件</li><li>Factories：生产Entities等</li><li>Repositoroies：资源，入库操作</li></ol><p>核心业务逻辑</p><p>技术实现细节</p><p>领域驱动中关心业务的流转，业务指的是从订单-&gt;库存-&gt;支付，类似这样的是属于业务；比如，查询订单、查询库存，这些操作不叫业务。</p><h3 id="COLA框架"><a href="#COLA框架" class="headerlink" title="COLA框架"></a>COLA框架</h3><p>CQRS（Command Query</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2yomg8ya0j21gj0u0td7.jpg" alt="image-20220606180623948"> </p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2yonmh44mj21i00u0n1q.jpg" alt="image-20220606180731780"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2yopibz5ij21h50u00wa.jpg" alt="image-20220606180920564"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2yp8i9vjyj21000g575m.jpg" alt="image-20220606182738657"></p><h3 id="六边形架构"><a href="#六边形架构" class="headerlink" title="六边形架构"></a>六边形架构</h3><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2yp9vba0gj211n0g7jtk.jpg" alt="image-20220606182856085"></p><h3 id="洋葱架构"><a href="#洋葱架构" class="headerlink" title="洋葱架构"></a>洋葱架构</h3><p>纵向架构+六边形横向架构相结合</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2ypd6tseej213l0fmgow.jpg" alt="image-20220606183208041"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2ypduwu5uj20pa0fzgo5.jpg" alt="image-20220606183246117"></p><h3 id="分层架构与DDD整合"><a href="#分层架构与DDD整合" class="headerlink" title="分层架构与DDD整合"></a>分层架构与DDD整合</h3><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2ypffncxyj215m0io76l.jpg" alt="image-20220606183418050"></p><h3 id="落地框架-COLA"><a href="#落地框架-COLA" class="headerlink" title="落地框架-COLA"></a>落地框架-COLA</h3><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2ypgtngn7j20mi0gwq4l.jpg" alt="image-20220606183538241"></p><h3 id="微服务拆分"><a href="#微服务拆分" class="headerlink" title="微服务拆分"></a>微服务拆分</h3><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2yprtxckkj20r30j60th.jpg" alt="image-20220606184613350"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2yprd4qf8j20vm0k6jsn.jpg" alt="image-20220606184545801"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2zhd93deaj20w30u0769.jpg" alt="image-20220607104056597"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2zhg96gttj21lw0u0tcb.jpg" alt="image-20220607104348232"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2zil8n2x1j21j40u0n1u.jpg" alt="image-20220607112314611"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2zir9ffi8j21qh0u0jx3.jpg" alt="image-20220607112858273"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2zizrg5irj21yj0u07b7.jpg" alt="image-20220607113712361"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2zj0f5jhqj21w80u0n40.jpg" alt="image-20220607113749800"></p><p>![image-20220608000959856](..&#x2F;..&#x2F;..&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20220608000959856.png)</p><p>![image-20220608001139853](..&#x2F;..&#x2F;..&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20220608001139853.png)</p>]]></content>
    
    
    
    <tags>
      
      <tag>DDD</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
